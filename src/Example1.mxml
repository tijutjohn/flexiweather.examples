<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="horizontal"
		xmlns:widgets="com.iblsoft.flexiweather.widgets.*"
		creationComplete="onCreationComplete(event)">
	<mx:Script>
		<![CDATA[
			import mx.controls.Alert;
			import com.iblsoft.flexiweather.ogc.InteractiveLayerWMS;
			import com.iblsoft.flexiweather.ogc.OGCServiceConfigurationManager;
			import com.iblsoft.flexiweather.ogc.Version;
			import com.iblsoft.flexiweather.ogc.WMSLayerConfiguration;
			import com.iblsoft.flexiweather.ogc.WMSServiceConfiguration;
			
			private function onCreationComplete(event: Event): void
			{
            	var scm: OGCServiceConfigurationManager =
            			OGCServiceConfigurationManager.getInstance();

    			var srv: WMSServiceConfiguration = scm.getService(
    					"https://ogcie.iblsoft.com/ria", new Version(1, 3, 0),
						WMSServiceConfiguration) as WMSServiceConfiguration;
				//srv.updatePeriod = 5*60*1000;
				
				var lc: WMSLayerConfiguration;
				var l: InteractiveLayerWMS;
				lc = new WMSLayerConfiguration(srv, ["background-dem"]);
				lc.label = "Backgrounds/DEM";
				l = new InteractiveLayerWMS(iw, lc);
				iw.addLayer(l);
				l.updateData();

				lc = new WMSLayerConfiguration(srv, ["foreground-lines"]);
				lc.label = "Overlays/Border lines";
				l = new InteractiveLayerWMS(iw, lc);
				iw.addLayer(l);
				l.updateData();
			}
		]]>
	</mx:Script>
	<mx:VBox width="100%" height="100%">
		<widgets:InteractiveWidget id="iw" width="100%" height="100%"/>
	</mx:VBox>
</mx:Application>
